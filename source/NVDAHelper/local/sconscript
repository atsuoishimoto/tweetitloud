Import([
	'env',
	'vbufRPCStubs',
])

controllerRPCHeader,controllerRPCClientSource,controllerRPCServerSource=env.MSRPCStubs(
	target="./nvdaController",
	source=[
		"#interfaces/nvdaController/nvdaController.idl",
		"#interfaces/nvdaController/nvdaController.acf",
	],
	MIDLFLAGS=env['MIDLFLAGS']+['/prefix','all','nvdaController_'],
)

localLib=env.SharedLibrary(
	target="nvdaHelperLocal",
	source=[
		"nvdaHelperLocal.cpp",
		"beeps.cpp",
		vbufRPCStubs[1],
		'rpcSrv.cpp',
		'nvdaController.c',
		controllerRPCServerSource,
	],
	LIBS=[
		"rpcrt4",
	],
)

Return('localLib')
